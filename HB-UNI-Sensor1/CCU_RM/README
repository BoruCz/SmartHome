-------------------------------------------------------------------------------
// Diverse Infos und Dokumentationen zur HM Anbindung
// 2018-10-23 Tom Major (Creative Commons)
// https://creativecommons.org/licenses/by-nc-sa/3.0/
// Danke an jp112sdl für seine wertvollen Hinweise

-------------------------------------------------------------------------------
# neues xml testen:
mount -o remount,rw /
restart_rm nach /root kopieren
chmod 700 restart_rm
neues xml nach /firmware/rftypes kopieren
mount -o remount,ro /
ro status testen mit  grep "\sro[\s,]" /proc/mounts
/root/restart_rm

-------------------------------------------------------------------------------
# HB-UNI-Sensor1-addon.tgz bauen:
ggf. neues xml nach <Repo>CCU_RM/src/addon/firmware/rftypes kopieren
<Repo>CCU_RM/src/addon/params prüfen/anpassen, Versionsnummer erhöhen
mount -o remount,rw /
<Repo>CCU_RM nach /root kopieren
cd CCU_RM/
chmod 700 build.sh
./build.sh
mount -o remount,ro /
/root/CCU_RM nach <Repo> zurückkopieren
(durch build.sh geänderte Dateien: HB-UNI-Sensor1-addon.tgz, VERSION, update-check.cgi)

-------------------------------------------------------------------------------
#restart_rm
#!/bin/sh
echo
/etc/init.d/S50lighttpd restart
sleep 1
/etc/init.d/S61rfd restart
sleep 1
/etc/init.d/S70ReGaHss restart

-------------------------------------------------------------------------------
TomMajor custom HM data type 'Digitaler Eingang'
Durch diese Änderungen wird der plotbare HomeMatic Datentyp ILLUMINATION für den HB-UNI-Sensor1 in den Datentyp 'Digitaler Eingang' umgewandelt.
So erhält man in der Geräteansicht *und* in der Diagramm-Legende einen Namen der besser zu einem beliebigen (binären) Status 0/1 passt.
Dieser Status ist in einem Diagramm plotbar (nicht mit allen HM Datentypen möglich).
Die Wahl fiel auf Datentyp ILLUMINATION weil dieser in den Device xml der HM Geräte kaum bzw. nicht verwendet wird.
Ein Abschnitt im install bzw. uninstall Script sorgt für die Änderungen, diese sind im Einzelnen:

neue Zeile:
/www/config/stringtable_de.txt
WEATHER|ILLUMINATION\t\t\${stringTableWeatherIllumination$JAVA_DEVICE_NAME}
# wichtig, Tabs müssen sein, nur mit space wird der String-Namen nicht eingelesen!

neue Zeile:
/www/webui/js/lang/de/translate.lang.stringtable.js
"stringTableWeatherIllumination$JAVA_DEVICE_NAME" : "Digitaler Eingang",

Ersetzen:
/www/webui/js/lang/de/translate.lang.diagram.js
"diagramValueTypeILLUMINATION": "Digitaler Eingang",

